/*! element-ui-admin | (c) Sun */
webpackJsonp([0,4],{0:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=o("n2nP"),s=n(a),i=o("kpqR"),l=n(i),r=o("RP5c"),c=n(r),d=o("qBF2"),u=n(d),f=o("rtZt"),p=n(f),m=o("vF2R"),g=n(m),_=o("fpcd");s.default.use(l.default),s.default.use(c.default),s.default.use(u.default),(0,_.initHttpInterceptors)();var h=new c.default({routes:g.default});new s.default({el:".app",router:h,render:function(e){return e(p.default)}})},zABi:function(e,t){},K7DV:function(e,t){},"VU/8":function(e,t){e.exports=function(e,t,o,n){var a,s=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(a=e,s=e.default);var l="function"==typeof s?s.options:s;if(t&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns),o&&(l._scopeId=o),n){var r=Object.create(l.computed||null);Object.keys(n).forEach(function(e){var t=n[e];r[e]=function(){return t}}),l.computed=r}return{esModule:a,exports:s,options:l}}},XbGW:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("uqQ2"),s=n(a),i=o("2KEU"),l=n(i),r=o("x1tY"),c=n(r);t.default={data:function(){return{}},components:{Navbar:s.default,RouterNav:l.default,MainContent:c.default}}},uqQ2:function(e,t,o){o("YzMx");var n=o("VU/8")(o("Q2PO"),o("G7JZ"),null,null);e.exports=n.exports},YzMx:function(e,t){},Q2PO:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=o("LwU7"),s=n(a);t.default={data:function(){return{logged:s.check_logged()}},methods:{logout:function(){s.logout(),this.$router.push("/"),location.reload()}}}},LwU7:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return!!d.default.get("userinfo")}function s(){return d.default.getJSON("userinfo")}function i(e){d.default.set("userinfo",e)}function l(){d.default.remove("userinfo")}function r(){return"http://121.42.33.171:8800"}Object.defineProperty(t,"__esModule",{value:!0}),t.check_logged=a,t.get_userinfo=s,t.set_userinfo=i,t.logout=l,t.urlprefix=r;var c=o("y6Mz"),d=n(c)},y6Mz:function(e,t,o){var n,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! js-cookie v2.1.4 | MIT */
!function(i){var l=!1;if(o("nErl")&&(n=i,a="function"==typeof n?n.call(t,o,t,e):n,!(void 0!==a&&(e.exports=a)),l=!0),"object"==s(t)&&(e.exports=i(),l=!0),!l){var r=window.Cookies,c=window.Cookies=i();c.noConflict=function(){return window.Cookies=r,c}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var o=arguments[e];for(var n in o)t[n]=o[n]}return t}function t(o){function n(t,a,s){var i;if("undefined"!=typeof document){if(arguments.length>1){if(s=e({path:"/"},n.defaults,s),"number"==typeof s.expires){var l=new Date;l.setMilliseconds(l.getMilliseconds()+864e5*s.expires),s.expires=l}s.expires=s.expires?s.expires.toUTCString():"";try{i=JSON.stringify(a),/^[\{\[]/.test(i)&&(a=i)}catch(e){}a=o.write?o.write(a,t):encodeURIComponent(a+"").replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(t+""),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var r="";for(var c in s)s[c]&&(r+="; "+c,!0!==s[c]&&(r+="="+s[c]));return document.cookie=t+"="+a+r}t||(i={});for(var d=document.cookie?document.cookie.split("; "):[],u=0;u<d.length;u++){var f=d[u].split("="),p=f.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var m=f[0].replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent);if(p=o.read?o.read(p,m):o(p,m)||p.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===m){i=p;break}t||(i[m]=p)}catch(e){}}return i}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,o){n(t,"",e(o,{expires:-1}))},n.withConverter=t,n}return t(function(){})})},nErl:function(e,t){(function(t){e.exports=t}).call(t,{})},G7JZ:function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{staticClass:"navbar__logo-box",attrs:{span:4}},[n("img",{staticClass:"navbar__logo",attrs:{src:o("rOMI"),alt:""}})]),e._v(" "),n("el-col",{staticClass:"navbar__menu-box",attrs:{span:20}},[n("ul",{staticClass:"el-menu el-menu--horizontal navbar__menu"},[e.logged?n("li",{staticClass:"el-menu-item",on:{click:e.logout}},[e._v("退出登录")]):e._e()]),e._v(" "),n("p",{staticClass:"navbar__title"},[e._v("文档管理系统")])])],1)},staticRenderFns:[]}},rOMI:function(e,t){e.exports="data:image/png;base64,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"},"2KEU":function(e,t,o){o("6KHn");var n=o("VU/8")(o("sJUb"),o("QoDQ"),null,null);e.exports=n.exports},"6KHn":function(e,t){},sJUb:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},computed:{level1:function(){return this.$router.options.routes.map(function(e){return e.path})}}}},QoDQ:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-menu",{attrs:{"default-active":e.$route.path,"default-openeds":e.level1,theme:"dark",router:""}},[e._l(e.$router.options.routes,function(t){return t.meta.hidden?e._e():[t.children&&1!=t.children.length?o("el-submenu",{attrs:{index:t.path}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-menu"}),e._v(e._s(t.meta.name))]),e._v(" "),e._l(t.children,function(n){return n.meta.hidden?e._e():o("el-menu-item",{key:t.path+"/"+n.path,attrs:{index:t.path+"/"+n.path}},[e._v(e._s(n.meta.name))])})],2):o("el-menu-item",{key:t.path,attrs:{index:t.path}},[o("i",{staticClass:"el-icon-menu"}),e._v(e._s(t.meta.name)+"\n        ")])]})],2)},staticRenderFns:[]}},x1tY:function(e,t,o){o("+Nlc");var n=o("VU/8")(o("sBJ2"),o("63Jj"),null,null);e.exports=n.exports},"+Nlc":function(e,t){},sBJ2:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("Whie"),s=n(a);t.default={data:function(){return{}},components:{RouterBreadcrumb:s.default}}},Whie:function(e,t,o){o("W2hT");var n=o("VU/8")(o("ztTP"),o("BCO8"),null,null);e.exports=n.exports},W2hT:function(e,t){},ztTP:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}}}},BCO8:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-breadcrumb",{staticClass:"router-breadcrumb",attrs:{separator:"/"}},e._l(e.$route.matched,function(t){return"/"!=t.path?o("el-breadcrumb-item",{key:t.path,attrs:{to:t.path}},[e._v(e._s(t.meta.name))]):e._e()}))},staticRenderFns:[]}},"63Jj":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main-content"},[o("RouterBreadcrumb",{staticClass:"main-content__router-breadcrumb"}),e._v(" "),o("router-view",{staticClass:"main-content__router-view"})],1)},staticRenderFns:[]}},gQPG:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app"},[o("Navbar",{staticClass:"app__navbar"}),e._v(" "),o("el-row",{staticClass:"app__main-box"},[o("el-col",{staticClass:"app__router-nav-box",attrs:{span:4}},[o("RouterNav")],1),e._v(" "),o("el-col",{staticClass:"app__main-content-box",attrs:{span:20}},[o("router-view")],1)],1)],1)},staticRenderFns:[]}},vF2R:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o("x1tY"),i=a(s),l=o("IUek"),r=a(l),c=o("4RPT"),d=a(c),u=o("1cfX"),f=a(u),p=o("RA61"),m=a(p),g=o("xmb0"),_=a(g),h=o("u9EY"),b=a(h),v=o("bWlm"),y=a(v),k=o("Wu7x"),x=a(k),w=o("LwU7"),$=n(w),U=function(e,t){o.e(1,function(){e(o("/HWW"))})},C=function(e,t){o.e(2,function(){e(o("+RZU"))})},S=[{path:"/",component:i.default,meta:{name:"首页"},children:[{path:"",component:r.default}]}];if($.check_logged()){var V=$.get_userinfo().logtype;3==V?(S=[{path:"/",component:i.default,meta:{name:"首页"},children:[{path:"",component:r.default}]},{path:"/backend_manage",component:i.default,meta:{name:"后台管理"},children:[{path:"",redirect:"school",meta:{hidden:!0}},{path:"school",component:d.default,meta:{name:"学校管理"}},{path:"course",component:f.default,meta:{name:"课程管理"}},{path:"doc",component:m.default,meta:{name:"文档管理"}},{path:"manager",component:_.default,meta:{name:"后台管理员管理"}},{path:"school_manager",component:b.default,meta:{name:"学校管理员管理"}}]},{path:"/school_manage",component:i.default,meta:{name:"学校管理"},children:[{path:"",redirect:"school_user",meta:{hidden:!0}},{path:"school_user",component:y.default,meta:{name:"学校用户管理"}}]},{path:"/user",component:i.default,meta:{name:"用户"},children:[{path:"",redirect:"account",meta:{hidden:!0}},{path:"doc_view",component:x.default,meta:{name:"查看文档"}},{path:"account",component:C,meta:{name:"用户信息"}}]}],S.push({path:"*",component:U,meta:{hidden:!0}})):2==V?(S=[{path:"/",component:i.default,meta:{name:"首页"},children:[{path:"",component:r.default}]},{path:"/school_manage",component:i.default,meta:{name:"学校管理"},children:[{path:"",redirect:"school_user",meta:{hidden:!0}},{path:"school_user",component:y.default,meta:{name:"学校用户管理"}}]},{path:"/user",component:i.default,meta:{name:"用户"},children:[{path:"",redirect:"account",meta:{hidden:!0}},{path:"doc_view",component:x.default,meta:{name:"查看文档"}},{path:"account",component:C,meta:{name:"用户信息"}}]}],S.push({path:"*",component:U,meta:{hidden:!0}})):(S=[{path:"/",component:i.default,meta:{name:"首页"},children:[{path:"",component:r.default}]},{path:"/user",component:i.default,meta:{name:"用户"},children:[{path:"",redirect:"account",meta:{hidden:!0}},{path:"doc_view",component:x.default,meta:{name:"查看文档"}},{path:"account",component:C,meta:{name:"用户信息"}}]}],S.push({path:"*",component:U,meta:{hidden:!0}}))}t.default=S},IUek:function(e,t,o){o("JavK");var n=o("VU/8")(o("/MMO"),o("qQA0"),null,null);e.exports=n.exports},JavK:function(e,t){},"/MMO":function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=o("LwU7"),s=n(a);t.default={data:function(){return{logged_in:s.check_logged(),form:{username:"",password:"",logtype:null},userinfo:s.get_userinfo()}},methods:{onSubmit:function(){var e=this;this.$http.post(s.urlprefix()+"/login",this.form).then(function(t){if("200"==t.body.code){var o=t.body.data.token;s.set_userinfo({id:t.body.data.userinfo.id,username:e.form.username,logtype:e.form.logtype,token:o}),location.reload()}else e.$message({type:"info",message:"验证失败"})},function(t){e.$message({type:"info",message:"网络连接失败，请稍后重试"})})}}}},rtZt:function(e,t,o){o("K7DV");var n=o("VU/8")(o("XbGW"),o("gQPG"),null,null);e.exports=n.exports},"4RPT":function(e,t,o){o("DD6Y");var n=o("VU/8")(o("bBxW"),o("zR16"),null,null);e.exports=n.exports},DD6Y:function(e,t){},bBxW:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=o("LwU7"),s=n(a);t.default={data:function(){return{tableData:[],newSchool:{name:""},checkdocDialogVisible:!1,modifydocDialogVisible:!1,visible_doc_tree:[],modify_doc_tree:[],defaultProps:{children:"children",label:"label"},page_loading:!0,dlg1_loading:!1,dlg2_loading:!1,checked_nodes:[],modified_school_id:null,max_doc_id:0}},methods:{onSubmit:function(){var e=this;this.page_loading=!0,this.$http.post(s.urlprefix()+"/school",{name:this.newSchool.name},{headers:{token:s.get_userinfo().token}}).then(function(t){"200"==t.body.code?(e.$message({type:"success",message:"创建成功"}),e.refresh_data()):e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})})},check_doc_tree:function(e){var t=this;this.checkdocDialogVisible=!0,this.dlg1_loading=!0,this.$http.get(s.urlprefix()+"/school/"+e,{headers:{token:s.get_userinfo().token}}).then(function(e){t.dlg1_loading=!1,"200"==e.body.code?t.visible_doc_tree=e.body.data.visible_doc_tree:t.$message({type:"info",message:"验证失败"})},function(e){t.dlg1_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})},modify:function(e){var t=this;this.modified_school_id=e,this.modifydocDialogVisible=!0,this.dlg2_loading=!0,this.$http.get(s.urlprefix()+"/school/"+e,{headers:{token:s.get_userinfo().token}}).then(function(e){t.dlg2_loading=!1,"200"==e.body.code?(t.visible_doc_tree=e.body.data.visible_doc_tree,t.modify_doc_tree=e.body.data.modify_doc_tree,t.checked_nodes=e.body.data.checked_nodes,t.max_doc_id=e.body.data.max_doc_id):t.$message({type:"info",message:"验证失败"})},function(e){t.dlg2_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})},confirmSelect:function(){var e=this;this.$confirm("确认修改?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.put(s.urlprefix()+"/school/"+e.modified_school_id,{checked_nodes:JSON.stringify(e.$refs.modify_visible_tree.getCheckedKeys().filter(function(t){return parseInt(t)<=parseInt(e.max_doc_id)}))},{headers:{token:s.get_userinfo().token}}).then(function(t){e.page_loading=!1,"200"==t.body.code?(e.modify(e.modified_school_id),e.$message({type:"success",message:"修改成功!"})):e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){e.$message({type:"info",message:"已取消修改"})})},refresh_data:function(){var e=this;s.check_logged()?this.$http.get(s.urlprefix()+"/school",{headers:{token:s.get_userinfo().token}}).then(function(t){e.page_loading=!1,"200"==t.body.code?e.tableData=t.body.data:e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})}):this.$router.push("/")},delete_school:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.page_loading=!0,t.$http.delete(s.urlprefix()+"/school/"+e,{headers:{token:s.get_userinfo().token}}).then(function(e){t.page_loading=!1,"200"==e.body.code?(t.$message({type:"success",message:"删除成功"}),t.refresh_data()):t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){t.$message({type:"info",message:"已取消修改"})})}},created:function(){this.refresh_data()}}},zR16:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.page_loading,expression:"page_loading",modifiers:{body:!0}}]},[o("el-row",[o("el-col",{attrs:{span:17}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"学校名"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.check_doc_tree(t.row.id)}}},[e._v("查看可见文档")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.modify(t.row.id)}}},[e._v("编辑可见文档")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.delete_school(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:17}},[o("h3",[e._v("新建学校")]),e._v(" "),o("div",{staticClass:"grid-content"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.newSchool}},[o("el-form-item",{attrs:{label:"课程名"}},[o("el-input",{attrs:{placeholder:"学校名"},model:{value:e.newSchool.name,callback:function(t){e.newSchool.name=t},expression:"newSchool.name"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("新建")])],1)],1)],1)])],1),e._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading.body",value:e.dlg1_loading,expression:"dlg1_loading",modifiers:{body:!0}}],attrs:{title:"可见文档",visible:e.checkdocDialogVisible},on:{"update:visible":function(t){e.checkdocDialogVisible=t}}},[o("el-tree",{attrs:{data:e.visible_doc_tree,props:e.defaultProps}})],1),e._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading.body",value:e.dlg2_loading,expression:"dlg2_loading",modifiers:{body:!0}}],attrs:{title:"可见文档修改",visible:e.modifydocDialogVisible},on:{"update:visible":function(t){e.modifydocDialogVisible=t}}},[o("el-tree",{ref:"modify_visible_tree",attrs:{data:e.modify_doc_tree,"show-checkbox":"","default-expand-all":"","node-key":"node_id","default-checked-keys":e.checked_nodes,"highlight-current":"",props:e.defaultProps}}),e._v(" "),o("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.confirmSelect}},[e._v("确认修改")])],1)],1)},staticRenderFns:[]}},"1cfX":function(e,t,o){o("dsOk");var n=o("VU/8")(o("J0Um"),o("gtVe"),null,null);e.exports=n.exports},dsOk:function(e,t){},J0Um:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=o("LwU7"),s=n(a);t.default={data:function(){return{tableData:[],newCourse:{name:""},checkdocDialogVisible:!1,docData:[],page_loading:!0,dlg_loading:!1}},methods:{onSubmit:function(){var e=this;this.page_loading=!0,this.$http.post(s.urlprefix()+"/course",{name:this.newCourse.name},{headers:{token:s.get_userinfo().token}}).then(function(t){"200"==t.body.code?(e.$message({type:"success",message:"创建成功"}),e.refresh_data()):e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})})},check_doc:function(e){var t=this;this.checkdocDialogVisible=!0,this.dlg_loading=!0,this.$http.get(s.urlprefix()+"/document?course_id="+e,{headers:{token:s.get_userinfo().token}}).then(function(e){t.dlg_loading=!1,"200"==e.body.code?t.docData=e.body.data:t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})},refresh_data:function(){var e=this;s.check_logged()?this.$http.get(s.urlprefix()+"/course",{headers:{token:s.get_userinfo().token}}).then(function(t){e.page_loading=!1,"200"==t.body.code?e.tableData=t.body.data:e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})}):this.$router.push("/")},delete_course:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.page_loading=!0,t.$http.delete(s.urlprefix()+"/course/"+e,{headers:{token:s.get_userinfo().token}}).then(function(e){t.page_loading=!1,"200"==e.body.code?(t.$message({type:"success",message:"删除成功"}),t.refresh_data()):t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){t.$message({type:"info",message:"已取消修改"})})}},created:function(){s.check_logged()?this.refresh_data():this.$router.push("/")}}},gtVe:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.page_loading,expression:"page_loading",modifiers:{body:!0}}]},[o("el-row",[o("el-col",{attrs:{span:17}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"课程名"}}),e._v(" "),o("el-table-column",{attrs:{label:"文档数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.doc_number))]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.check_doc(t.row.id)}}},[e._v("查看")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.delete_course(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:17}},[o("h3",[e._v("新建课程")]),e._v(" "),o("div",{staticClass:"grid-content"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.newCourse}},[o("el-form-item",{attrs:{label:"课程名"}},[o("el-input",{attrs:{placeholder:"课程名"},model:{value:e.newCourse.name,callback:function(t){e.newCourse.name=t},expression:"newCourse.name"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("新建")])],1)],1)],1)])],1),e._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading.body",value:e.dlg_loading,expression:"dlg_loading",modifiers:{body:!0}}],attrs:{title:"课程内的文档",visible:e.checkdocDialogVisible},on:{"update:visible":function(t){e.checkdocDialogVisible=t}}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.docData}},[o("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"description",label:"文档名"}})],1)],1)],1)},staticRenderFns:[]}},RA61:function(e,t,o){o("ghbT");var n=o("VU/8")(o("utah"),o("EVhq"),null,null);e.exports=n.exports},ghbT:function(e,t){},utah:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=o("LwU7"),s=n(a);t.default={data:function(){return{tableData:[],fileList:[],courses:[{id:null,name:"所有"},{id:0,name:"无所属课程"}],modify_courses:[{id:0,name:"无所属课程"}],selected_course:null,page_loading:!0,modifyBelongCourseVisible:!1,modified_course:null,modified_doc_id:"",upload_url:s.urlprefix()+"/document"}},methods:{handleRemove:function(e,t){},download:function(e){window.open(s.urlprefix()+"/docfile/"+e,"_blank")},upload_success:function(e,t,o){this.$message({type:"success",message:"上传成功"}),this.get_documents(this.selected_course)},upload_error:function(e,t,o){this.$message({type:"info",message:"上传失败，格式是否符合要求？"})},confirm_delete:function(e){var t=this;this.$confirm("将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.delete(s.urlprefix()+"/document/"+e,{headers:{token:s.get_userinfo().token}}).then(function(e){"200"==e.body.code?(t.$message({type:"success",message:"删除成功"}),t.get_documents(t.selected_course)):t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},filter_by_course:function(){this.get_documents(this.selected_course),this.page_loading=!0},refresh_data:function(){var e=this;s.check_logged()?this.$http.get(s.urlprefix()+"/course",{headers:{token:s.get_userinfo().token}}).then(function(t){if("200"==t.body.code){var o=Array.from(e.courses);o.push.apply(o,t.body.data),e.courses=o,o=Array.from(e.modify_courses),o.push.apply(o,t.body.data),e.modify_courses=o,e.get_documents(null)}else e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})}):this.$router.push("/")},edit_course:function(e){this.modified_doc_id=e,this.modifyBelongCourseVisible=!0},confirmSelect:function(){var e=this;this.$confirm("确认修改?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.modifyBelongCourseVisible=!1,e.page_loading=!0,e.$http.put(s.urlprefix()+"/document/"+e.modified_doc_id,{course_id:e.modified_course},{headers:{token:s.get_userinfo().token}}).then(function(t){"200"==t.body.code?(e.get_documents(e.selected_course),e.$message({type:"success",message:"修改成功!"})):e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){e.$message({type:"info",message:"已取消修改"})})},get_documents:function(e){var t=this,o="";null!=e&&(o="?course_id="+e),this.$http.get(s.urlprefix()+"/document"+o,{headers:{token:s.get_userinfo().token}}).then(function(e){t.page_loading=!1,"200"==e.body.code?t.tableData=e.body.data:t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}},created:function(){s.check_logged()?this.refresh_data():this.$router.push("/")},beforeDestroy:function(){}}},EVhq:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.page_loading,expression:"page_loading",modifiers:{body:!0}}]},[o("el-select",{attrs:{placeholder:"按课程筛选",id:"course-filter"},on:{change:e.filter_by_course},model:{value:e.selected_course,callback:function(t){e.selected_course=t},expression:"selected_course"}},e._l(e.courses,function(e){return o("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})})),e._v(" "),o("el-row",[o("el-col",{attrs:{span:17}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-table",{attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"description",label:"文档名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"coursename",label:"所属课程"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.download(t.row.id)}}},[e._v("下载")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.edit_course(t.row.id)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.confirm_delete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])],1),e._v(" "),o("el-row",[o("el-col",{attrs:{id:"upload_box"}},[o("h3",[e._v("上传文件")]),e._v(" "),o("div",{staticClass:"grid-content"},[o("el-upload",{staticClass:"upload-demo",attrs:{action:e.upload_url,"on-remove":e.handleRemove,"file-list":e.fileList,"on-success":e.upload_success,"on-error":e.upload_error}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)])],1),e._v(" "),o("el-dialog",{attrs:{title:"编辑所属课程",visible:e.modifyBelongCourseVisible},on:{"update:visible":function(t){e.modifyBelongCourseVisible=t}}},[o("el-select",{attrs:{placeholder:"按课程筛选"},model:{value:e.modified_course,callback:function(t){e.modified_course=t},expression:"modified_course"}},e._l(e.modify_courses,function(e){return o("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})})),e._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.confirmSelect}},[e._v("确认修改")])],1)],1)},staticRenderFns:[]}},xmb0:function(e,t,o){o("mqRR");var n=o("VU/8")(o("e1UE"),o("zkym"),null,null);e.exports=n.exports},mqRR:function(e,t){},e1UE:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=o("LwU7"),s=n(a);t.default={data:function(){return{tableData:[],newUser:{name:"",password:""},page_loading:!0}},methods:{onSubmit:function(e){var t=this;this.page_loading=!0,this.$http.post(s.urlprefix()+"/backend_manager",{username:this.newUser.name,password:this.newUser.password},{headers:{token:s.get_userinfo().token}}).then(function(e){"200"==e.body.code?(t.$message({type:"success",message:"创建成功"}),t.refresh_data()):t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})},modify_password:function(e){var t=this;this.$prompt("请输入新密码","修改密码",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(o){t.$http.put(s.urlprefix()+"/backend_manager/"+e,{password:o.value},{headers:{token:s.get_userinfo().token}}).then(function(e){"200"==e.body.code?t.$message({type:"success",message:"修改成功!"}):t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},confirm_delete:function(e){var t=this;this.$confirm("将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.page_loading=!0,t.$http.delete(s.urlprefix()+"/backend_manager/"+e,{headers:{token:s.get_userinfo().token}}).then(function(e){t.page_loading=!1,"200"==e.body.code?(t.$message({type:"success",message:"删除成功"}),t.refresh_data()):t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},refresh_data:function(){var e=this;s.check_logged()?this.$http.get(s.urlprefix()+"/backend_manager",{headers:{token:s.get_userinfo().token}}).then(function(t){e.page_loading=!1,"200"==t.body.code?e.tableData=t.body.data:e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})}):this.$router.push("/")}},created:function(){s.check_logged()?this.refresh_data():this.$router.push("/")}}},zkym:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.page_loading,expression:"page_loading",modifiers:{body:!0}}]},[o("el-row",[o("el-col",{attrs:{span:17}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"用户名"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.modify_password(t.row.id)}}},[e._v("修改密码")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.confirm_delete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:17}},[o("h3",[e._v("新建后台管理员")]),e._v(" "),o("div",{staticClass:"grid-content"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.newUser}},[o("el-form-item",{attrs:{label:"用户名"}},[o("el-input",{attrs:{placeholder:"用户名"},model:{value:e.newUser.name,callback:function(t){e.newUser.name=t},expression:"newUser.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码"}},[o("el-input",{attrs:{placeholder:"密码"},model:{value:e.newUser.password,callback:function(t){e.newUser.password=t},expression:"newUser.password"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("新建")])],1)],1)],1)])],1)],1)},staticRenderFns:[]}},u9EY:function(e,t,o){o("h4h7");var n=o("VU/8")(o("yFs1"),o("Ia1K"),null,null);e.exports=n.exports},h4h7:function(e,t){},yFs1:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t;
}Object.defineProperty(t,"__esModule",{value:!0});var a=o("LwU7"),s=n(a);t.default={data:function(){return{tableData:[{id:"1",username:"manager1",school:{name:null}}],newUser:{username:null,password:null},schools:[],page_loading:!0,selected_school:null,school_of_new:null}},methods:{onSubmit:function(){var e=this;this.page_loading=!0,this.$http.post(s.urlprefix()+"/school_manager",{username:this.newUser.username,password:this.newUser.password,school_id:this.school_of_new},{headers:{token:s.get_userinfo().token}}).then(function(t){"200"==t.body.code?(e.$message({type:"success",message:"创建成功"}),e.get_managers(e.selected_school)):e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})})},modify_password:function(e){var t=this;this.$prompt("请输入新密码","修改密码",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(o){t.$http.put(s.urlprefix()+"/school_manager/"+e,{password:o.value},{headers:{token:s.get_userinfo().token}}).then(function(e){"200"==e.body.code?t.$message({type:"success",message:"修改成功!"}):t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},refresh_data:function(){var e=this;s.check_logged()?this.$http.get(s.urlprefix()+"/school",{headers:{token:s.get_userinfo().token}}).then(function(t){if("200"==t.body.code){var o=Array.from(e.schools);o.push.apply(o,t.body.data),e.schools=o,e.get_managers(null)}else e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})}):this.$router.push("/")},get_managers:function(e){var t=this,o="";null!=e&&(o="?school_id="+e),this.$http.get(s.urlprefix()+"/school_manager"+o,{headers:{token:s.get_userinfo().token}}).then(function(e){t.page_loading=!1,"200"==e.body.code?t.tableData=e.body.data:t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})},confirm_delete:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.page_loading=!0,t.$http.delete(s.urlprefix()+"/school_manager/"+e,{headers:{token:s.get_userinfo().token}}).then(function(e){t.page_loading=!1,"200"==e.body.code?(t.$message({type:"success",message:"删除成功"}),t.get_managers(t.selected_school)):t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){t.$message({type:"info",message:"已取消修改"})})},filter_by_school:function(){this.page_loading=!0,this.get_managers(this.selected_school)}},created:function(){s.check_logged()?this.refresh_data():this.$router.push("/")}}},Ia1K:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.page_loading,expression:"page_loading",modifiers:{body:!0}}]},[o("el-select",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"按学校筛选"},on:{change:e.filter_by_school},model:{value:e.selected_school,callback:function(t){e.selected_school=t},expression:"selected_school"}},e._l(e.schools,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),o("el-row",[o("el-col",{attrs:{span:17}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"school.name",label:"所属学校"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.modify_password(t.row.id)}}},[e._v("修改密码")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.confirm_delete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:17}},[o("h3",[e._v("新建学校管理员")]),e._v(" "),o("div",{staticClass:"grid-content"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.newUser}},[o("el-form-item",{attrs:{label:"用户名"}},[o("el-input",{attrs:{placeholder:"用户名"},model:{value:e.newUser.username,callback:function(t){e.newUser.username=t},expression:"newUser.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码"}},[o("el-input",{attrs:{placeholder:"密码"},model:{value:e.newUser.password,callback:function(t){e.newUser.password=t},expression:"newUser.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"所属学校"}},[o("el-select",{attrs:{placeholder:"选择所属学校"},model:{value:e.school_of_new,callback:function(t){e.school_of_new=t},expression:"school_of_new"}},e._l(e.schools,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("新建")])],1)],1)],1)])],1)],1)},staticRenderFns:[]}},bWlm:function(e,t,o){o("WEm9");var n=o("VU/8")(o("p87m"),o("GHSf"),null,null);e.exports=n.exports},WEm9:function(e,t){},p87m:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=o("LwU7"),s=n(a);t.default={data:function(){return{tableData:[{id:"1",username:"manager1",doc_number:1,school:{name:"null"}}],newUser:{username:"",password:""},checkdocDialogVisible:!1,modifydocDialogVisible:!1,visible_doc_tree:[],modify_doc_tree:[],defaultProps:{children:"children",label:"label"},page_loading:!0,dlg1_loading:!1,dlg2_loading:!1,checked_nodes:[],modified_user_id:null,max_doc_id:0,schools:[],selected_school:null,school_of_new:null,is_backend:!0}},methods:{onSubmit:function(){var e=this;this.page_loading=!0,this.$http.post(s.urlprefix()+"/school_user",{username:this.newUser.username,password:this.newUser.password,school_id:this.school_of_new},{headers:{token:s.get_userinfo().token}}).then(function(t){"200"==t.body.code?(e.$message({type:"success",message:"创建成功"}),e.get_users(e.selected_school)):e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})})},modify_password:function(e){var t=this;this.$prompt("请输入新密码","修改密码",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(o){t.$http.put(s.urlprefix()+"/school_user/"+e,{password:o.value},{headers:{token:s.get_userinfo().token}}).then(function(e){"200"==e.body.code?t.$message({type:"success",message:"修改成功!"}):t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},confirm_delete:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.page_loading=!0,t.$http.delete(s.urlprefix()+"/school_user/"+e,{headers:{token:s.get_userinfo().token}}).then(function(e){t.page_loading=!1,"200"==e.body.code?(t.$message({type:"success",message:"删除成功"}),t.get_users(t.selected_school)):t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){t.$message({type:"info",message:"已取消修改"})})},check_doc_tree:function(e){var t=this;this.checkdocDialogVisible=!0,this.dlg1_loading=!0,this.$http.get(s.urlprefix()+"/school_user/"+e,{headers:{token:s.get_userinfo().token}}).then(function(e){t.dlg1_loading=!1,"200"==e.body.code?t.visible_doc_tree=e.body.data.visible_doc_tree:t.$message({type:"info",message:"验证失败"})},function(e){t.dlg1_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})},modify:function(e){var t=this;this.modified_user_id=e,this.modifydocDialogVisible=!0,this.dlg2_loading=!0,this.$http.get(s.urlprefix()+"/school_user/"+e,{headers:{token:s.get_userinfo().token}}).then(function(e){t.dlg2_loading=!1,"200"==e.body.code?(t.visible_doc_tree=e.body.data.visible_doc_tree,t.modify_doc_tree=e.body.data.modify_doc_tree,t.checked_nodes=e.body.data.checked_nodes,t.max_doc_id=e.body.data.max_doc_id):t.$message({type:"info",message:"验证失败"})},function(e){t.dlg2_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})},confirmSelect:function(){var e=this;this.$confirm("确认修改?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.put(s.urlprefix()+"/school_user/"+e.modified_user_id,{checked_nodes:JSON.stringify(e.$refs.modify_visible_tree.getCheckedKeys().filter(function(t){return parseInt(t)<=parseInt(e.max_doc_id)}))},{headers:{token:s.get_userinfo().token}}).then(function(t){e.page_loading=!1,"200"==t.body.code?(e.modify(e.modified_user_id),e.$message({type:"success",message:"修改成功!"})):e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})})}).catch(function(){e.$message({type:"info",message:"已取消修改"})})},refresh_data:function(){var e=this;s.check_logged()?2==s.get_userinfo().logtype?(this.is_backend=!1,this.$http.get(s.urlprefix()+"/school_manager?username="+s.get_userinfo().username,{headers:{token:s.get_userinfo().token}}).then(function(t){"200"==t.body.code?(e.selected_school=t.body.data.school.id,e.school_of_new=t.body.data.school.id,e.get_users(e.selected_school)):e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})})):this.$http.get(s.urlprefix()+"/school",{headers:{token:s.get_userinfo().token}}).then(function(t){if("200"==t.body.code){var o=Array.from(e.schools);o.push.apply(o,t.body.data),e.schools=o,e.get_users(null)}else e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})}):this.$router.push("/")},get_users:function(e){var t=this,o="";null!=e&&(o="?school_id="+e),this.$http.get(s.urlprefix()+"/school_user"+o,{headers:{token:s.get_userinfo().token}}).then(function(e){t.page_loading=!1,"200"==e.body.code?t.tableData=e.body.data:t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})},filter_by_school:function(){this.page_loading=!0,this.get_users(this.selected_school)}},created:function(){this.refresh_data()}}},GHSf:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.page_loading,expression:"page_loading",modifiers:{body:!0}}]},[e.is_backend?o("el-select",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"按学校筛选"},on:{change:e.filter_by_school},model:{value:e.selected_school,callback:function(t){e.selected_school=t},expression:"selected_school"}},e._l(e.schools,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})):e._e(),e._v(" "),o("el-row",[o("el-col",{attrs:{span:17}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"school.name",label:"所属学校"}}),e._v(" "),o("el-table-column",{attrs:{label:"可见文档"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.check_doc_tree(t.row.id)}}},[e._v("查看")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.modify(t.row.id)}}},[e._v("编辑可见文档")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.modify_password(t.row.id)}}},[e._v("修改密码")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.confirm_delete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:17}},[o("h3",[e._v("新建学校用户")]),e._v(" "),o("div",{staticClass:"grid-content"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.newUser}},[o("el-form-item",{attrs:{label:"用户名"}},[o("el-input",{attrs:{placeholder:"用户名"},model:{value:e.newUser.username,callback:function(t){e.newUser.username=t},expression:"newUser.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码"}},[o("el-input",{attrs:{placeholder:"密码"},model:{value:e.newUser.password,callback:function(t){e.newUser.password=t},expression:"newUser.password"}})],1),e._v(" "),e.is_backend?o("el-form-item",{attrs:{label:"所属学校"}},[o("el-select",{attrs:{placeholder:"选择所属学校"},model:{value:e.school_of_new,callback:function(t){e.school_of_new=t},expression:"school_of_new"}},e._l(e.schools,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e(),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("新建")])],1)],1)],1)])],1),e._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading.body",value:e.dlg1_loading,expression:"dlg1_loading",modifiers:{body:!0}}],attrs:{title:"可见文档",visible:e.checkdocDialogVisible},on:{"update:visible":function(t){e.checkdocDialogVisible=t}}},[o("el-tree",{attrs:{data:e.visible_doc_tree,props:e.defaultProps}})],1),e._v(" "),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading.body",value:e.dlg2_loading,expression:"dlg2_loading",modifiers:{body:!0}}],attrs:{title:"可见文档修改",visible:e.modifydocDialogVisible},on:{"update:visible":function(t){e.modifydocDialogVisible=t}}},[o("el-tree",{ref:"modify_visible_tree",attrs:{data:e.modify_doc_tree,"show-checkbox":"","default-expand-all":"","node-key":"node_id","default-checked-keys":e.checked_nodes,"highlight-current":"",props:e.defaultProps}}),e._v(" "),o("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.confirmSelect}},[e._v("确认修改")])],1)],1)},staticRenderFns:[]}},Wu7x:function(e,t,o){o("b9fe");var n=o("VU/8")(o("3sjL"),o("PHU6"),null,null);e.exports=n.exports},b9fe:function(e,t){},"3sjL":function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=o("LwU7"),s=n(a);t.default={data:function(){return{tableData:[],fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],courses:[{id:null,name:"所有"},{id:0,name:"无所属课程"}],selected_course:null,page_loading:!0}},methods:{filter_by_course:function(){this.get_documents(this.selected_course),this.page_loading=!0},download:function(e){window.open(s.urlprefix()+"/docfile/"+e,"_blank")},refresh_data:function(){var e=this;s.check_logged()?this.$http.get(s.urlprefix()+"/course",{headers:{token:s.get_userinfo().token}}).then(function(t){if("200"==t.body.code){var o=Array.from(e.courses);o.push.apply(o,t.body.data),e.courses=o,e.get_documents(null)}else e.$message({type:"info",message:"验证失败"})},function(t){e.page_loading=!1,e.$message({type:"info",message:"网络连接失败，请稍后重试"})}):this.$router.push("/")},get_documents:function(e){var t=this,o="?",n=s.get_userinfo();null!=e?(o+="course_id="+e,o+="&logtype="+n.logtype,o+="&username="+n.username):(o+="logtype="+n.logtype,o+="&username="+n.username),this.$http.get(s.urlprefix()+"/document"+o,{headers:{token:s.get_userinfo().token}}).then(function(e){t.page_loading=!1,"200"==e.body.code?t.tableData=e.body.data:t.$message({type:"info",message:"验证失败"})},function(e){t.page_loading=!1,t.$message({type:"info",message:"网络连接失败，请稍后重试"})})}},created:function(){s.check_logged()?this.refresh_data():this.$router.push("/")}}},PHU6:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.page_loading,expression:"page_loading",modifiers:{body:!0}}]},[o("el-select",{attrs:{placeholder:"按课程筛选",id:"course-filter"},on:{change:e.filter_by_course},model:{value:e.selected_course,callback:function(t){e.selected_course=t},expression:"selected_course"}},e._l(e.courses,function(e){return o("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})})),e._v(" "),o("el-row",[o("el-col",{attrs:{span:17}},[o("div",{staticClass:"grid-content bg-purple-dark"},[o("el-table",{attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"description",label:"文档名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"coursename",label:"所属课程"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.download(t.row.id)}}},[e._v("下载")])]}}])})],1)],1)])],1)],1)},staticRenderFns:[]}},fpcd:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){i.default.http.interceptors.push(function(e,t){e.params={_:Date.now()},t(function(e){e.headers["X-Http-Interceptor"]="vue-resource"})})}Object.defineProperty(t,"__esModule",{value:!0}),t.initHttpInterceptors=void 0;var s=o("n2nP"),i=n(s);o("zABi"),t.initHttpInterceptors=a},qQA0:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h1",[e._v("欢迎来到文档管理系统")]),e._v(" "),e.logged_in?o("div",[o("h2",[e._v("您好，"+e._s(e.userinfo.username))])]):o("div",{attrs:{id:"log-box"}},[o("h2",[e._v("您还没有登录，请先登录")]),e._v(" "),o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"用户名"}},[o("el-input",{attrs:{placeholder:"username"},model:{value:e.form.username,callback:function(t){e.form.username=t},expression:"form.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码"}},[o("el-input",{attrs:{type:"password",placeholder:"password"},model:{value:e.form.password,callback:function(t){e.form.password=t},expression:"form.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"帐号类型"}},[o("el-select",{attrs:{placeholder:"请选择帐号类型"},model:{value:e.form.logtype,callback:function(t){e.form.logtype=t},expression:"form.logtype"}},[o("el-option",{attrs:{label:"学校用户",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"学校管理员",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"后台管理员",value:"3"}})],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]}}});